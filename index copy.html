<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>TiltDJ</title>
    <!-- <script src="https://zimjs.org/cdn/1.3.2/createjs.js"></script>
    <script src="https://zimjs.org/cdn/cat/00/zim.js"></script>
    <script src="header.js"></script>     -->
    <script type="module">
      import zim from "https://zimjs.org/cdn/016/zim";
      new Frame({
        scaling: FIT,
        width: 1290,
        height: 2896,
        color: yellow,
        outerColor: dark,
        ready: ready,
        assets: ["1.mp3", "2.mp3"],
        path: "assets/",
        sensors: true,
      });

      function ready() {
        const audio1 = new Aud("1.mp3");
        const audio2 = new Aud("2.mp3");
        const synth = new Synth()
        const ball1 = new Circle().center().wiggle("x", W/2, 50, W/2, 1, 3);
        const ball2 = new Circle().center().wiggle("y", H/2, 50, H/2, 1, 3);


        // const permissionType1 = "deviceorientation";
        // const permissionType2 = "devicemotion";
        // const ask = new PermissionAsk(init, permissionType1, permissionType2);

        init(true);

        function init(yes) {
          const errorPane = new Pane("SENSOR not available", yellow);
          if (yes) {
            const label1 = new Label().center();

            const a1 = audio1.play();
            const a2 = audio2.play();
            
            const tone = synth.tone(0,"A",)

            // F.on("deviceorientation", (e) => {
            Ticker.add(()=>{
              // label1.text = decimals(e.rotation.y, 2);
              // ball1.loc(W / 2 + e.rotation.y * 10, H / 2);
              
              if (ball1.x > W / 2) {
                a1.volume = 0;
                a2.volume = 1;
              } else {
                a1.volume = 1;
                a2.volume = 0;
              }
              S.update();
            });

            // F.on("devicemotion", (e) => {
            //   label2.text = decimals(e.acceleration.x, 2);
            //   ball2.loc(W / 2 + e.acceleration.y * 10, H);
            //   if (ball2.x > W / 2) {
            //     s1.volume = 0;
            //     s2.volume = 1;
            //   } else {
            //     s1.volume = 1;
            //     s2.volume = 0;
            //   }
            //   S.update();
            // })

          } else {
            errorPane.show();
          }
          S.update();

        }

        //Create four methods so that when user clicks 
      } 
    </script>
    <meta name="viewport" content="width=device-width, user-scalable=no" />
  </head>
  <body></body>
</html>
